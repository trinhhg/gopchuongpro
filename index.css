:root {
    --bg: #f1f5f9;
    --surface: #ffffff;
    --primary: #2563eb;
    --text: #0f172a;
    --text-light: #64748b;
    --border: #e2e8f0;
    --danger: #ef4444;
    --success: #22c55e;
    --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
}

* { box-sizing: border-box; outline: none; margin: 0; padding: 0; }
body { 
    font-family: 'Inter', system-ui, sans-serif; 
    background: var(--bg); 
    color: var(--text); 
    height: 100vh; 
    overflow: hidden; 
}

/* Ẩn khu vực kỹ thuật */
.engine-room { position: absolute; top: -9999px; left: -9999px; opacity: 0; pointer-events: none; }

.dashboard { display: flex; flex-direction: column; height: 100%; }

/* HEADER */
.top-bar { 
    height: 60px; background: var(--surface); border-bottom: 1px solid var(--border); 
    display: flex; align-items: center; padding: 0 20px; gap: 15px; flex-shrink: 0;
}

.folder-controls { display: flex; gap: 5px; }
.folder-select { padding: 6px 10px; border: 1px solid var(--border); border-radius: 6px; min-width: 150px; font-weight: 600; font-size: 13px; background: #f8fafc; }
.btn-icon { width: 32px; height: 32px; border: 1px solid var(--border); background: white; border-radius: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; }
.btn-icon:hover { background: #eff6ff; color: var(--primary); border-color: var(--primary); }
.btn-icon.danger:hover { background: #fef2f2; color: var(--danger); border-color: var(--danger); }

.search-box { flex: 1; position: relative; max-width: 400px; }
.search-box input { width: 100%; padding: 8px 10px 8px 30px; border: 1px solid var(--border); border-radius: 6px; font-size: 13px; }
.search-icon { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: var(--text-light); }

.nav-middle { display: flex; background: #e2e8f0; padding: 3px; border-radius: 8px; gap: 2px; }
.nav-pill { border: none; background: transparent; padding: 5px 15px; border-radius: 6px; font-weight: 600; font-size: 13px; color: var(--text-light); cursor: pointer; }
.nav-pill.active { background: white; color: var(--primary); shadow: 0 1px 2px rgba(0,0,0,0.05); }

/* MAIN CONTENT */
.content-wrapper { flex: 1; position: relative; overflow: hidden; }
.view-section { 
    position: absolute; inset: 0; background: var(--bg); 
    display: none; flex-direction: column; padding: 20px; 
}
.view-section.active { display: flex; }

/* FILE MANAGER GRID */
.toolbar { display: flex; justify-content: space-between; margin-bottom: 15px; }
.btn-tool { padding: 8px 16px; border-radius: 6px; border: none; font-weight: 600; cursor: pointer; font-size: 13px; margin-left: 5px; }
.btn-tool.primary { background: var(--primary); color: white; }
.btn-tool.secondary { background: white; border: 1px solid var(--border); }
.btn-tool.danger { background: #fee2e2; color: #b91c1c; }

.file-grid { 
    display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; 
    overflow-y: auto; padding-bottom: 20px; align-content: start;
}
.file-card { 
    background: white; border: 1px solid var(--border); border-radius: 8px; padding: 15px; 
    display: flex; flex-direction: column; gap: 10px; cursor: pointer; transition: 0.1s; 
}
.file-card:hover { border-color: var(--primary); transform: translateY(-2px); box-shadow: var(--shadow); }
.file-card.selected { background: #eff6ff; border-color: var(--primary); }
.card-header { display: flex; justify-content: space-between; }
.file-name { font-weight: 700; font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.card-actions { display: flex; gap: 5px; margin-top: 5px; }
.btn-small { flex: 1; padding: 6px; border: 1px solid var(--border); background: #f8fafc; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 600; }
.btn-small:hover { border-color: var(--primary); color: var(--primary); background: white; }

/* CHECKLIST */
.checklist-toolbar { background: white; padding: 15px; border-radius: 8px; border: 1px solid var(--border); display: flex; align-items: center; margin-bottom: 15px; }
.progress-bar-bg { flex: 1; height: 10px; background: #e2e8f0; border-radius: 5px; margin: 0 15px; overflow: hidden; }
.progress-bar-fill { height: 100%; background: var(--success); width: 0%; transition: width 0.3s; }

.checklist-container { background: white; border-radius: 8px; border: 1px solid var(--border); flex: 1; display: flex; flex-direction: column; overflow: hidden; }
.checklist-header { display: flex; padding: 12px 20px; background: #f8fafc; border-bottom: 1px solid var(--border); font-weight: 700; font-size: 12px; text-transform: uppercase; color: var(--text-light); }
.checklist-body { flex: 1; overflow-y: auto; }
.cl-item { display: flex; padding: 10px 20px; border-bottom: 1px solid #f1f5f9; font-size: 13px; align-items: center; }
.cl-item:hover { background: #f8fafc; }
.cl-item.done { background: #f0fdf4; }
.cl-item.done .col-title { text-decoration: line-through; color: #94a3b8; }

/* HISTORY TABLE (FIXED ALIGNMENT) */
.history-table-wrapper { background: white; border-radius: 8px; border: 1px solid var(--border); flex: 1; overflow: hidden; display: flex; flex-direction: column; }
.history-table { width: 100%; border-collapse: collapse; table-layout: fixed; } /* QUAN TRỌNG: Fixed layout */
.history-table th { background: #f8fafc; padding: 12px 15px; text-align: left; font-size: 12px; font-weight: 700; color: var(--text-light); border-bottom: 1px solid var(--border); }
.history-table td { padding: 10px 15px; border-bottom: 1px solid #f1f5f9; font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Cột Chi tiết được phép dài */
.history-table td:last-child { white-space: normal; }

.badge { padding: 3px 8px; border-radius: 4px; font-size: 11px; font-weight: 700; text-transform: uppercase; }
.badge.success { background: #dcfce7; color: #15803d; }
.badge.error { background: #fee2e2; color: #b91c1c; }
.badge.warn { background: #fef3c7; color: #b45309; }

/* PREVIEW & TOAST */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 50; }
.modal-overlay.show { display: flex; }
.modal-window { width: 900px; height: 90vh; background: #f1f5f9; border-radius: 10px; display: flex; flex-direction: column; overflow: hidden; }
.modal-header { height: 50px; background: white; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; }
.paper { background: white; padding: 50px; margin: 20px auto; max-width: 800px; min-height: 100%; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }

.toast { position: fixed; top: 20px; right: 20px; background: #1e293b; color: white; padding: 10px 20px; border-radius: 6px; transform: translateY(-100%); transition: 0.3s; opacity: 0; z-index: 100; font-weight: 600; }
.toast.show { transform: translateY(0); opacity: 1; }
.toast.danger { background: #ef4444; }
